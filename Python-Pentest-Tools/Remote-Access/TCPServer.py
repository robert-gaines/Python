#!/usr/bin/env python3

import random
import socket
import sys

def main():
    #
    print("[*] TCP Server [*]")
    #
    s = socket.socket(socket.AF_INET,socket.SOCK_STREAM)
    #
    s.setsockopt(socket.SOL_SOCKET,socket.SO_REUSEADDR,1)
    #
    addr = "0.0.0.0"
    #
    port = random.randint(1024,65535)
    #
    print("[*] Binding: %s:%s " % (addr,port))
    #
    try:
        #
        s.bind((addr,port))
        #
        s.listen(5)
        #
    except:
        #
        sys.exit("[!] Socket Error [!]")
        #
    print("[*] Listening on: %s:%s ..." % (addr,port))
        #
    while(True):
        #
        conn, address = s.accept()
        #
        if(conn):
            #
            print("[*] Connection from: %s" % str(address))
            #
            message = b"[*] Connection acknowledged [*]\n"
            #
            message_two = b"[!] Closing Connection [!]\n"
            #
            conn.send(message)
            #
            conn.send(message_two)
            #
            conn.close()
            #
        else:
            #
            continue

if(__name__ == '__main__'):
    #
    main()
